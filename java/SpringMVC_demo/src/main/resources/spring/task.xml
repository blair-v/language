<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:task="http://www.springframework.org/schema/task"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
	   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
	   http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
	   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
	   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
       http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd">

    <!-- 配置注解扫描 -->

    <!-- Spring定时器注解开关-->
    <task:annotation-driven/>

    <bean id="exceptionShopSummaryInfoService" class="com.x.dmt.service.ExceptionShopSummaryInfoService"
          factory-method="getInstance">
    </bean>

    <bean id="exceptionOrderInfoService" class="com.x.dmt.service.ExceptionOrderInfoService"
          factory-method="getInstance">
    </bean>

    <bean id="alarmOrderExceptionService" class="com.x.dmt.service.AlarmExceptionOrderInfoService"
          factory-method="getInstance">
    </bean>

    <!--(秒0-59) *(分钟0-59) *(小时0-23) *(日期1-31) *(月份1-12或是JAN-DEC) *(星期1-7或是SUN-SAT)-->

    <task:scheduled-tasks>
        <task:scheduled ref="exceptionShopSummaryInfoService" method="addExceptionShopSummaryInfo" cron="0 01 * * * ?"/>
    </task:scheduled-tasks>

    <task:scheduled-tasks>
        <task:scheduled ref="exceptionOrderInfoService" method="addALlShopExceptionOrder" cron="0 10 * * * ?"/>
    </task:scheduled-tasks>

    <task:scheduled-tasks>
        <task:scheduled ref="alarmOrderExceptionService" method="alertALlShopExceptionOrder" cron="0 40 * * * ?"/>
    </task:scheduled-tasks>

    <task:scheduled-tasks>
        <task:scheduled ref="exceptionOrderInfoService" method="addVipShopExceptionOrder" cron="0 01 * * * ?"/>
    </task:scheduled-tasks>

    <task:scheduled-tasks>
        <task:scheduled ref="alarmOrderExceptionService" method="alertVipShopExceptionOrder" cron="0 21 * * * ?"/>
    </task:scheduled-tasks>


    <!--Data import-->
    <bean id="dataImportService" class="com.x.dmt.service.DataImportService"
          factory-method="getInstance">
    </bean>

    <task:scheduled-tasks>
        <task:scheduled ref="dataImportService" method="runImportShopInfo" cron="0 01 02,08,14,20 * * ?"/>
    </task:scheduled-tasks>

    <task:scheduled-tasks>
        <task:scheduled ref="dataImportService" method="runImportStatOrderInfo" cron="0 05 02,08,14,20 * * ?"/>
    </task:scheduled-tasks>

    <!-- Recover Data -->

    <!--<task:scheduled-tasks>-->
        <!--<task:scheduled ref="dataImportService" method="runImportShopInfo" cron="0 15 13 * * ?"/>-->
    <!--</task:scheduled-tasks>-->

    <!--<task:scheduled-tasks>-->
        <!--<task:scheduled ref="dataImportService" method="runImportStatOrderInfo" cron="0 53 17 * * ?"/>-->
    <!--</task:scheduled-tasks>-->
</beans>


